<html><head><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151329628-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151329628-1');
</script>
<meta http-equiv="X-UA-Compatible" content="IE=edge" /><link rel="shortcut icon" href="icons/favicon.ico" /><link rel="stylesheet" type="text/css" href="styles/branding.css" /><link rel="stylesheet" type="text/css" href="styles/branding-en-US.css" /><script type="text/javascript" src="scripts/branding.js"> </script><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Cross-platform</title><meta name="Language" content="en-us" /><meta name="Microsoft.Help.Id" content="Neon.Cadence-CrossPlatform" /><meta name="Description" content="The Cadence platform supports writing and deploying workflows and activities in multiple languages such as GOLANG, Java, and C#/.NET and it is possible for code written in one language to call workflows and activities written in another." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><meta name="BrandingAware" content="true" /><link type="text/css" rel="stylesheet" href="styles/highlight.css" /><script type="text/javascript" src="scripts/highlight.js"> </script><link rel="stylesheet" type="text/css" href="styles/branding-Website.css" /><script type="text/javascript" src="scripts/jquery-3.3.1.min.js"></script><script type="text/javascript" src="scripts/branding-Website.js"></script><script type="text/javascript" src="scripts/clipboard.min.js"></script></head><body onload="OnLoad('cs')"><input type="hidden" id="userDataCache" class="userDataStyle" /><div class="pageHeader" id="PageHeader">Neon and neonKUBE class libraries and tools<form id="SearchForm" method="get" action="#" onsubmit="javascript:TransferToSearchPage(); return false;"><input id="SearchTextBox" type="text" maxlength="200" /><button id="SearchButton" type="submit"></button></form></div><div class="pageBody"><div class="leftNav" id="leftNav"><div id="tocNav"><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="index.html" title="Neon and neonKUBE class libraries and tools" tocid="roottoc">Neon and neonKUBE class libraries and tools</a></div><div class="toclevel0" data-toclevel="0"><a class="tocCollapsed" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="Neon.Cadence-Overview.htm" title="Neon.Cadence" tocid="0a5efbcd-7775-4ff2-9841-aad7c7996540">Neon.Cadence</a></div><div class="toclevel1" data-toclevel="1" data-childrenloaded="true"><a class="tocExpanded" onclick="javascript: Toggle(this);" href="#!" /><a data-tochassubtree="true" href="Neon.Cadence-Other-Logging.htm" title="Other Topics" tocid="bdadb211-a885-4aa5-8c4a-d34e56a124fb">Other Topics</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="Neon.Cadence-Other-Logging.htm" title="Logging" tocid="907cf0a2-3f54-4c9f-a93f-3e54f5e2f806">Logging</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="Neon.Cadence-Other-Serialization.htm" title="Data serialization" tocid="41335d55-fbda-49f1-9187-fffeafb41352">Data serialization</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="Neon.Cadence-Other-UnitTesting.htm" title="Unit testing" tocid="824a3ec2-5cc2-4fe8-94c1-1038ffbdc5e2">Unit testing</a></div><div class="toclevel2" data-toclevel="2"><a data-tochassubtree="false" href="62735281-ac6d-4ddb-944a-8a4bb70fb180.htm" title="Java differences" tocid="62735281-ac6d-4ddb-944a-8a4bb70fb180">Java differences</a></div><div class="toclevel2 current" data-toclevel="2"><a data-tochassubtree="false" href="Neon.Cadence-CrossPlatform.htm" title="Cross-platform" tocid="b6a8a730-6e6c-4ff4-81b2-d70d22f00fdc">Cross-platform</a></div></div><div id="tocResizableEW" onmousedown="OnMouseDown(event);"></div><div id="TocResize" class="tocResize"><img id="ResizeImageIncrease" src="icons/TocOpen.gif" onclick="OnIncreaseToc()" alt="Click or drag to resize" title="Click or drag to resize" /><img id="ResizeImageReset" src="icons/TocClose.gif" style="display:none" onclick="OnResetToc()" alt="Click or drag to resize" title="Click or drag to resize" /></div></div><div class="topicContent" id="TopicContent"><table class="titleTable"><tr><td class="logoColumn"><img src="icons/Help.png" /></td><td class="titleColumn"><h1>Cross-platform</h1></td></tr></table><span class="introStyle"></span> <div class="collapsibleAreaRegion" id="summary"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID0RB')" onkeypress="SectionExpandCollapse_CheckKey('ID0RB', event)" tabindex="0"><img id="ID0RBToggle" class="collapseToggle" src="icons/SectionExpanded.png" />Overview</span></div><div id="ID0RBSection" class="collapsibleSection"><p>
          The Cadence platform supports writing and deploying workflows and activities in multiple
          languages such as GOLANG, Java, and C#/.NET and it is possible for code written in one
          language to call workflows and activities written in another.
        </p><p>
          Although we'd love it if you commited to using the .NET Cadence client for all
          your workflow needs, the time may come where your .NET code needs to interoperate
          with workflows and activities written in Java or GOLANG.  The reverse can also happen,
          where Java or GOLANG code needs to interoperate with .NET workflows and activities.
          To accmplish this, you'll need to know some details aboput how Cadence works.
        </p><p>
          There are two important considerations you'll need to address before making cross-platform
          calls: <strong>identifying the target workflow or activity being called</strong>
          and <strong>ensuring that serialized data is compatible</strong> for both platforms.
          We'll discuss each of these below.
        </p></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID1RB')" onkeypress="SectionExpandCollapse_CheckKey('ID1RB', event)" tabindex="0"><img id="ID1RBToggle" class="collapseToggle" src="icons/SectionExpanded.png" />Workflow and Activity Type Names</span></div><div id="ID1RBSection" class="collapsibleSection"><p>
          Cadence has a concept called a <strong>workflow type name</strong>.  This
          is a string used to identify a workflow implementation.  For the GOLANG client, 
          workflow type names are generally a combination of the module and name of the function 
          implementing the workflow; like <strong>main.MyWorkflow</strong> where
          <strong>main</strong> is the module name and <strong>MyWorkflow</strong>
          is the workfloy function.  Custom custom names may be also be specified.  The Java and
          .NET clients  are a bit more complex and allow a workflow type to define multiple workflow
          entry point methods.  For these clients, the workflow type name will be a combination
          of the workflow class and method names (and these may also be customized).
        </p><p>
          The first step towards cross-platform integration is to determine what the workflow or
          activity type name is for the target entity.  The easiest way to determine this is
          to go into your <strong>Cadence Web UI</strong> to discover the actual name used.
        </p></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID2RB')" onkeypress="SectionExpandCollapse_CheckKey('ID2RB', event)" tabindex="0"><img id="ID2RBToggle" class="collapseToggle" src="icons/SectionExpanded.png" />Data Serialization</span></div><div id="ID2RBSection" class="collapsibleSection"><p>
          To be able to make cross-platform workflow and activity calls, you'll also
          need to ensure that both sides are serializing data the same way.  There
          are two parts to this: using the same serialization format on both sides
          and ensuring that individual items are serialized the same.
        </p><p><strong>Serialization Format:</strong> You need to ensure that both
          platforms are using the same basic mechanism to serialize arguments and results
          into bytes that can be transmitted on the wire and persisted to the Cadence
          database.  By default, the GOLANG, Java, and .NET clients serialize data to
          JSON text and then render that into bytes as UTF-8.  It is possible
          to override this by implementing a custom <a href="T_Neon_Cadence_IDataConverter.htm">IDataConverter</a>
          that serializes data as XML, Protobuf, or whatever.
        </p><p><strong>Serialization Details:</strong> You also need to ensure that
          things like JSON property names and details like how date/time and other values
          are consistent on both sides.  The .NET client's default JSON serialization
          implementation is based on the very popular 
          <a href="https://www.newtonsoft.com/json" target="_blank">Newtonsoft JSON.NET</a>
          package.  You can use attributes like <span class="code">[JsonProperty]</span>, <span class="code">[JsonIgnore]</span>,
          and <span class="code">[JsonConverter]</span> for fine control over this.  Here's a link
          to more information:
          <a href="https://www.newtonsoft.com/json/help/html/SerializationAttributes.htm" target="_blank">JSON.NET Attributes</a></p></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID4RB')" onkeypress="SectionExpandCollapse_CheckKey('ID4RB', event)" tabindex="0"><img id="ID4RBToggle" class="collapseToggle" src="icons/SectionExpanded.png" />Cross-platform workflows</span></div><div id="ID4RBSection" class="collapsibleSection"><p>
          There are two approaches to interoperating with workflows written in 
          another language: using an untyped or typed workflow stub.
        </p><p>
          For <strong>untyped workflow stubs</strong>, you'll need to connect a <a href="T_Neon_Cadence_CadenceClient.htm">CadenceClient</a>
          to the Cadence cluster, create an untyped <a href="T_Neon_Cadence_WorkflowStub.htm">WorkflowStub</a>
          using a <a href="T_Neon_Cadence_WorkflowOptions.htm">WorkflowOptions</a>
          or <a href="T_Neon_Cadence_ChildWorkflowOptions.htm">ChildWorkflowOptions</a>
          to specify the exact workflow type name registered for the workflow.  Then you'll start the workflow
          taking care to pass the expected number and types of arguments.  You can also use this stub to query 
          and signal the workflow as well as waiting for workflow to complete, obtaining the result.
        </p><div class="alert"><table><tr><th><img src="icons/AlertNote.png" alt="Note" />Â Note</th></tr><tr><td><p>
            You can also create an untyped <a href="T_Neon_Cadence_WorkflowStub.htm">WorkflowStub</a>
            to connect to and manage an existing, already running workflow by workflow ID.
          </p></td></tr></table></div><p>
          Here's a code snippit demonstrating how to invoke a GOLANG workflow that sends an email.
          The workflow accepts three string arguments like: <span class="code">bool SendEmail(string to, string subject, string body)</span>
          and returns <span class="code">true</span> on success.  The workflow type name registered
          <strong>SendEmail</strong> in the <strong>Acme-PROD</strong> domain 
          by the GOLANG implementation as <strong>"SendEmail"</strong>:
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID3EADACAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID3EADACAAA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID3EADACAAA');return false;" title="Copy">Copy</a></div></div><div id="ID3EADACAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve"><span class="highlight-keyword">var</span> settings = <span class="highlight-keyword">new</span> CadenceSettings()
{
    <span class="highlight-comment">// This specifies the default domain for operations initiated by the</span>
    <span class="highlight-comment">// client connected below (this can be overridden for specific</span>
    <span class="highlight-comment">// operations.</span>

    DefaultDomain = <span class="highlight-literal">"Acme-PROD"</span>,

    <span class="highlight-comment">// Host/port for at least one of the Cadence cluster servers:</span>

    Servers = <span class="highlight-keyword">new</span> List&lt;<span class="highlight-keyword">string</span>&gt;() { <span class="highlight-literal">"cadence://localhost:7933"</span> }
};

<span class="highlight-keyword">using</span> (<span class="highlight-keyword">var</span> client = <span class="highlight-keyword">await</span> CadenceClient.ConnectAsync(settings))
{
    <span class="highlight-comment">// Create an untyped stub for the remote workflow.</span>

    <span class="highlight-keyword">var</span> stub = client.NewUntypedWorkflowStub(<span class="highlight-literal">"SendEmail"</span>);

    <span class="highlight-comment">// Start the workflow.  Note that we need to take to ensure that the number, order</span>
    <span class="highlight-comment">// and types of the parameters match what the GOLANG workflow implementation expects.</span>
    <span class="highlight-comment">// Untyped workflow stub arguments cannot be checked be the C# compiler.</span>
    <span class="highlight-comment">// </span>
    <span class="highlight-comment">// This method returns a [WorkflowExecution] which includes the workflow and</span>
    <span class="highlight-comment">// run IDs.  We're not using these here, but real applications may want to</span>
    <span class="highlight-comment">// persist this so that could check on long-running workflows later.</span>

    <span class="highlight-keyword">var</span> execution = <span class="highlight-keyword">await</span> stub.StartAsync(<span class="highlight-literal">"jeff@lilltek.com"</span>, <span class="highlight-literal">"Test subject"</span>, <span class="highlight-literal">"This is a test email."</span>);

    <span class="highlight-comment">// Wait for the workflow to complete and return it's result.  Note that we need</span>
    <span class="highlight-comment">// to explicitly specify the result [bool] type as a generic type parameter.</span>
    <span class="highlight-comment">// You need to ensure that this matches the workflow implementation as well.</span>

    <span class="highlight-keyword">var</span> success = <span class="highlight-keyword">await</span> stub.GetResultAsync&lt;<span class="highlight-keyword">bool</span>&gt;();

    <span class="highlight-keyword">if</span> (success)
    {
        Console.WriteLine(<span class="highlight-literal">"Email SENT!"</span>);
    }
    <span class="highlight-keyword">else</span>
    {
        Console.WriteLine(<span class="highlight-literal">"Email FAILED!"</span>);
    }
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID3EADACAAA");</script><p>
          For <strong>typed workflow stubs</strong>, you'll need to define a workflow interface
          with methods with argument and result types that match the workflow methods written using
          another language.  In general, the default workflow type name generated by the .NET client
          will not match the workflow type name registered for workflows written in other languages.
          So the trick is to decorate your workflow interface methods with [WorkflowMethod(Name = "workflow type name", IsFullName=true]
          attributes that specify the exact workflow type name registered by the target worker for
          the workflow. 
        </p><p>
          The IsFullName = true property tells the .NET client that it should 
          target the workflow type name exactly as specified rather than prefixing it with the fully
          qualified interface name as it would normally do be default.  Here's a sample with an interface
          definition that does this.
        </p><div class="codeSnippetContainer"><div class="codeSnippetContainerTabs"><div id="ID3EAAACAAA_tab1" class="codeSnippetContainerTabSingle">C#</div></div><div class="codeSnippetContainerCodeContainer"><div class="codeSnippetToolBar"><div class="codeSnippetToolBarText"><a id="ID3EAAACAAA_copyCode" href="#" class="copyCodeSnippet" onclick="javascript:CopyToClipboard('ID3EAAACAAA');return false;" title="Copy">Copy</a></div></div><div id="ID3EAAACAAA_code_Div1" class="codeSnippetContainerCode" style="display: block"><pre xml:space="preserve">[WorkflowInterface]
<span class="highlight-keyword">public</span> <span class="highlight-keyword">interface</span> IMailer : IWorkflow
{
    <span class="highlight-comment">// Notice that [IsFullName = true] below specifies that "SendEmail"</span>
    <span class="highlight-comment">// will be used as the target workflow type name without adding the</span>
    <span class="highlight-comment">// usual prefix.</span>

    [WorkflowMethod(Name = <span class="highlight-literal">"SendEmail"</span>, IsFullName = <span class="highlight-keyword">true</span>)]
    Task&lt;<span class="highlight-keyword">bool</span>&gt; SendEmail(<span class="highlight-keyword">string</span> recipient, <span class="highlight-keyword">string</span> subject, <span class="highlight-keyword">string</span> body);
}

<span class="highlight-keyword">public</span> <span class="highlight-keyword">static</span> <span class="highlight-keyword">async</span> Task Main(<span class="highlight-keyword">params</span> <span class="highlight-keyword">string</span>[] args)
{
    <span class="highlight-keyword">var</span> settings = <span class="highlight-keyword">new</span> CadenceSettings()
    {
        <span class="highlight-comment">// This specifies the default domain for operations initiated by the</span>
        <span class="highlight-comment">// client connected below (this can be overridden for specific</span>
        <span class="highlight-comment">// operations.</span>

        DefaultDomain = <span class="highlight-literal">"Acme-PROD"</span>,

        <span class="highlight-comment">// Host/port for at least one of the Cadence cluster servers:</span>

        Servers = <span class="highlight-keyword">new</span> List&lt;<span class="highlight-keyword">string</span>&gt;() { <span class="highlight-literal">"cadence://localhost:7933"</span> }
    };

    <span class="highlight-keyword">using</span> (<span class="highlight-keyword">var</span> client = <span class="highlight-keyword">await</span> CadenceClient.ConnectAsync(settings))
    {
        <span class="highlight-comment">// Create a typed stub for the remote workflow.</span>

        <span class="highlight-keyword">var</span> stub = client.NewWorkflowStub&lt;IMailer&gt;();

        <span class="highlight-comment">// Execute the workflow.</span>

        <span class="highlight-keyword">var</span> success = <span class="highlight-keyword">await</span> stub.SendEmail(<span class="highlight-literal">"jeff@lilltek.com"</span>, <span class="highlight-literal">"Test subject"</span>, <span class="highlight-literal">"This is a test email."</span>);

        <span class="highlight-keyword">if</span> (success)
        {
            Console.WriteLine(<span class="highlight-literal">"Email SENT!"</span>);
        }
        <span class="highlight-keyword">else</span>
        {
            Console.WriteLine(<span class="highlight-literal">"Email FAILED!"</span>);
        }
    }
}</pre></div></div></div><script type="text/javascript">AddLanguageTabSet("ID3EAAACAAA");</script></div><div class="collapsibleAreaRegion"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID5RB')" onkeypress="SectionExpandCollapse_CheckKey('ID5RB', event)" tabindex="0"><img id="ID5RBToggle" class="collapseToggle" src="icons/SectionExpanded.png" />Cross-platform activities</span></div><div id="ID5RBSection" class="collapsibleSection"><p>
          Making cross-platform activity calls work very much like cross-platform workflows
          and you may use typed or untyped stubs just like we did showed for mworkflows above.
        </p></div><div class="collapsibleAreaRegion" id="seeAlsoSection"><span class="collapsibleRegionTitle" onclick="SectionExpandCollapse('ID6RB')" onkeypress="SectionExpandCollapse_CheckKey('ID6RB', event)" tabindex="0"><img id="ID6RBToggle" class="collapseToggle" src="icons/SectionExpanded.png" />See Also</span></div><div id="ID6RBSection" class="collapsibleSection"><h4 class="subHeading">Reference</h4><div class="seeAlsoStyle"><a href="N_Neon_Cadence.htm">Neon.Cadence</a></div></div></div></div><div id="pageFooter" class="pageFooter">Offline help available for Windows: <a href="neon.chm">neon.chm</a><br />
Report any issues at: <a href="https://github.com/nforgeio/neonKUBE">https://github.com/nforgeio/neonKUBE</a><p>Copyright (c) 2005-2020 by neonFORGE LLC.  All rights reserved.</p></div></body></html>